# Abai Springs Backend Configuration
# Copy this file to config.env and update the values

# =====================================
# BASIC CONFIGURATION
# =====================================

# Server Configuration
NODE_ENV=development
PORT=3001
FRONTEND_URL=http://localhost:3000

# Database Configuration
MONGODB_URI=mongodb://localhost:27017/abai_springs

# =====================================
# AUTHENTICATION & SECURITY
# =====================================

# JWT Configuration (REQUIRED)
JWT_SECRET=your-super-secret-jwt-key-min-32-chars-long
JWT_REFRESH_SECRET=your-super-secret-refresh-token-key
JWT_EXPIRE=15m
JWT_REFRESH_EXPIRE=7d

# Super Admin Account (Change after setup)
SUPER_ADMIN_EMAIL=admin@abaisprings.com
SUPER_ADMIN_PASSWORD=SuperAdmin123!

# Password Policy
PASSWORD_MIN_LENGTH=8
PASSWORD_MAX_AGE_DAYS=90
PASSWORD_HISTORY_COUNT=5

# Account Lockout Policy
MAX_FAILED_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=30
IP_LOCKOUT_THRESHOLD=20

# =====================================
# CACHING & SESSION MANAGEMENT
# =====================================

# Redis Configuration (Optional - for enhanced performance)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_SESSION_DB=1
REDIS_CACHE_DB=0

# Node Cache (Fallback when Redis unavailable)
CACHE_TTL_SECONDS=3600
CACHE_MAX_KEYS=1000

# =====================================
# EMAIL & SMS NOTIFICATIONS
# =====================================

# SMTP Configuration (Optional - for email notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
EMAIL_FROM=noreply@abaisprings.com

# Twilio Configuration (Optional - for SMS notifications)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890

# =====================================
# SOCIAL LOGIN PROVIDERS
# =====================================

# Google OAuth2 (Optional)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3001/api/auth/google/callback

# Facebook Login (Optional)
FACEBOOK_APP_ID=your-facebook-app-id
FACEBOOK_APP_SECRET=your-facebook-app-secret
FACEBOOK_REDIRECT_URI=http://localhost:3001/api/auth/facebook/callback

# Apple Sign-In (Optional)
APPLE_CLIENT_ID=your-apple-client-id
APPLE_TEAM_ID=your-apple-team-id
APPLE_KEY_ID=your-apple-key-id
APPLE_PRIVATE_KEY_PATH=./certs/apple-private-key.p8
APPLE_REDIRECT_URI=http://localhost:3001/api/auth/apple/callback

# =====================================
# PAYMENT INTEGRATION
# =====================================

# M-Pesa Configuration (Enhanced)
MPESA_CONSUMER_KEY=your-mpesa-consumer-key
MPESA_CONSUMER_SECRET=your-mpesa-consumer-secret
MPESA_PASSKEY=your-mpesa-passkey
MPESA_SHORTCODE=your-mpesa-shortcode
MPESA_INITIATOR_NAME=your-initiator-name
MPESA_SECURITY_CREDENTIAL=your-security-credential
MPESA_ENVIRONMENT=sandbox
MPESA_CALLBACK_URL=https://yourdomain.com/api/payments/enhanced/webhook/mpesa
MPESA_TIMEOUT_URL=https://yourdomain.com/api/payments/enhanced/timeout/mpesa

# PayPal Configuration (Enhanced)
PAYPAL_CLIENT_ID=your-paypal-client-id
PAYPAL_CLIENT_SECRET=your-paypal-client-secret
PAYPAL_ENVIRONMENT=sandbox
PAYPAL_WEBHOOK_ID=your-paypal-webhook-id
PAYPAL_RETURN_URL=http://localhost:3000/payment/success
PAYPAL_CANCEL_URL=http://localhost:3000/payment/cancel

# Stripe Configuration (Enhanced)
STRIPE_PUBLISHABLE_KEY=your-stripe-publishable-key
STRIPE_SECRET_KEY=your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=your-stripe-webhook-secret

# Payment Gateway Settings
DEFAULT_PAYMENT_GATEWAY=mpesa
PAYMENT_RETRY_ATTEMPTS=3
PAYMENT_TIMEOUT_SECONDS=300

# Wallet Configuration
WALLET_MAX_BALANCE_KES=500000
WALLET_MIN_TOPUP_KES=10
WALLET_MAX_TOPUP_KES=100000
WALLET_DAILY_LIMIT_KES=50000
WALLET_MONTHLY_LIMIT_KES=500000
AUTO_TOPUP_ENABLED=true
LOYALTY_POINTS_RATE=10

# =====================================
# LOGGING & MONITORING
# =====================================

# Logging Configuration
LOG_LEVEL=info
LOG_FILE_PATH=./logs
LOG_MAX_SIZE=20m
LOG_MAX_FILES=14d

# Monitoring (Optional)
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001

# =====================================
# DEVELOPMENT & TESTING
# =====================================

# Development Settings
ENABLE_CORS=true
ENABLE_SWAGGER=true
ENABLE_DEBUG_LOGS=false

# Test Database (for running tests)
TEST_MONGODB_URI=mongodb://localhost:27017/abai_springs_test

# Rate Limiting (requests per minute)
GLOBAL_RATE_LIMIT=1000
API_RATE_LIMIT=100
AUTH_RATE_LIMIT=10
ADMIN_RATE_LIMIT=50

# =====================================
# PRODUCTION OVERRIDES
# =====================================

# Production Database (uncomment for production)
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/abai_springs

# Production Redis (uncomment for production)
# REDIS_URL=redis://username:password@hostname:port

# Production SMTP (uncomment for production)
# SMTP_HOST=smtp.sendgrid.net
# SMTP_USER=apikey
# SMTP_PASS=your-sendgrid-api-key

# SSL/HTTPS Configuration (production only)
# SSL_CERT_PATH=./certs/cert.pem
# SSL_KEY_PATH=./certs/key.pem
# FORCE_HTTPS=true

# Additional Security Headers
# CONTENT_SECURITY_POLICY=default-src 'self'
# HSTS_MAX_AGE=31536000

# =====================================
# FEATURE FLAGS
# =====================================

# Enable/Disable Features
ENABLE_MFA=true
ENABLE_SOCIAL_LOGIN=true
ENABLE_API_KEYS=true
ENABLE_SESSION_MANAGEMENT=true
ENABLE_PASSWORD_POLICY=true
ENABLE_ACCOUNT_LOCKOUT=true
ENABLE_GEOLOCATION_TRACKING=false
ENABLE_DEVICE_FINGERPRINTING=false

# Analytics & Tracking
ENABLE_USER_ANALYTICS=true
ENABLE_SECURITY_ANALYTICS=true
ENABLE_PERFORMANCE_MONITORING=true
